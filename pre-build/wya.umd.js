!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.wya=r()}(this,function(){"use strict";function i(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){var r,t,n;r=i,n=o[t=e],t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n})}return i}function r(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof r?r:String(r)}function e(e){var r,t=a(e.key);"method"===e.kind?(r={value:e.value,writable:!0,configurable:!0,enumerable:!1},Object.defineProperty(e.value,"name",{value:"symbol"==typeof t?"":t,configurable:!0})):"get"===e.kind?r={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?r={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(r={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:t,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:r};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function s(e){return e.decorators&&e.decorators.length}function d(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function o(e,r){var t=r.descriptor;if("field"===r.kind){var n=r.initializer;t={enumerable:t.enumerable,writable:t.writable,configurable:t.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,r.key,t)}function h(e,r,t){var n=r[e.placement];if(!t&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)}function y(e){var r={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(r,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(r.initializer=e.initializer),r}function m(e){if(void 0!==e)return r(e).map(function(e){var r=k(e);return c(e,"finisher","An element descriptor"),c(e,"extras","An element descriptor"),r})}function k(e){var r=String(e.kind);if("method"!==r&&"field"!==r)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+r+'"');var t=a(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;c(e,"elements","An element descriptor");var o={kind:r,key:t,placement:n,descriptor:Object.assign({},i)};return"field"!==r?c(e,"initializer","A method descriptor"):(c(i,"get","The property descriptor of a field descriptor"),c(i,"set","The property descriptor of a field descriptor"),c(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o}function f(e){var r=String(e.kind);if("class"!==r)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+r+'"');c(e,"key","A class descriptor"),c(e,"placement","A class descriptor"),c(e,"descriptor","A class descriptor"),c(e,"initializer","A class descriptor"),c(e,"extras","A class descriptor");var t=b(e,"finisher");return{elements:m(e.elements),finisher:t}}function c(e,r,t){if(void 0!==e[r])throw new TypeError(t+" can't have a ."+r+" property.")}function b(e,r){var t=e[r];if(void 0!==t&&"function"!=typeof t)throw new TypeError("Expected '"+r+"' to be a function");return t}var t,n,u,l,p,v,w,g=function(e,r){var t;"function"==typeof document.CustomEvent?t=new document.CustomEvent(e,{bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(t=document.createEvent("Event")).initEvent(e,!0,!0),r&&t&&(t.data=r),t?window.dispatchEvent(t):console.error("Bridge Error: dispatchEvent")};return new(t=[function(){for(var e=arguments,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=e[n];return function(e){e.prototype=i({},e.prototype,t)}}(i({},{}))],v=function(r){return{F:function e(){var a=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),r(this),Object.defineProperty(this,"__readyArr__",{value:[],writable:!0}),this.isInit=!1,window.addEventListener("_ready_",function(e){var r=e.data||{},t=r.status,n=r.data,i=void 0===n?{}:n;if(1===t){for(var o in a.isInit=!0,i)a[o]||(a[o]=i[o]);a.__readyArr__.forEach(function(e){return e()}),a.__readyArr__=[]}})},d:[{kind:"field",key:"version",value:function(){return"1.0.0"}},{kind:"method",key:"ready",value:function(e){this.isInit?e&&e():this.__readyArr__.push(e)}},{kind:"method",key:"onError",value:function(r){window.addEventListener("_error_",function(e){r&&r(e.data)})}},{kind:"method",key:"useJSBridgeFn",value:function(e){var r,t,n=arguments,i=window.WYAJSBridge?window.WYAJSBridge[e]:void 0,o="WYAJSBridge API未注入";!i&&(g("_error_",r=o),t&&t({status:0,msg:r}));for(var a=arguments.length,c=new Array(1<a?a-1:0),s=1;s<a;s++)c[s-1]=n[s];return i?i.apply(WYAJSBridge,c):"invoke"===e?Promise.reject({msg:o}):void 0}},{kind:"method",key:"invoke",value:function(e,r){return this.useJSBridgeFn("invoke",e,r)}},{kind:"method",key:"on",value:function(){for(var e=arguments,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=e[n];return this.useJSBridgeFn.apply(this,["on"].concat(t))}},{kind:"method",key:"once",value:function(){for(var e=arguments,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=e[n];return this.useJSBridgeFn.apply(this,["once"].concat(t))}},{kind:"method",key:"first",value:function(){for(var e=arguments,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=e[n];return this.useJSBridgeFn.apply(this,["first"].concat(t))}},{kind:"method",key:"last",value:function(){for(var e=arguments,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=e[n];return this.useJSBridgeFn.apply(this,["last"].concat(t))}},{kind:"method",key:"off",value:function(e){return this.useJSBridgeFn("off",e)}}]}}(function(e){var t,n;t=e,n=w.elements,["method","field"].forEach(function(r){n.forEach(function(e){e.kind===r&&"own"===e.placement&&o(t,e)})})},n),w=function(e,r){var t=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach(function(e){h(e,i)}),e.forEach(function(e){if(!s(e))return t.push(e);var r=function(e,r){for(var t=[],n=[],i=e.decorators,o=i.length-1;0<=o;o--){var a=r[e.placement];a.splice(a.indexOf(e.key),1);var c=y(e),s=(u=(0,i[o])(c)||c,l=k(u),p=b(u,"finisher"),v=m(u.extras),{element:l,finisher:p,extras:v});h(e=s.element,r),s.finisher&&n.push(s.finisher);var d=s.extras;if(d){for(var f=0;f<d.length;f++)h(d[f],r);t.push.apply(t,d)}}var u,l,p,v;return{element:e,finishers:n,extras:t}}(e,i);t.push(r.element),t.push.apply(t,r.extras),n.push.apply(n,r.finishers)}),!r)return{elements:t,finishers:n};var o=function(e,r){for(var t=[],n=r.length-1;0<=n;n--){var i=(void 0,s={kind:"class",elements:e.map(y)},Object.defineProperty(s,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),s),o=f((0,r[n])(i)||i);if(void 0!==o.finisher&&t.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var c=a+1;c<e.length;c++)if(e[a].key===e[c].key&&e[a].placement===e[c].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}var s;return{elements:e,finishers:t}}(t,r);return n.push.apply(n,o.finishers),o.finishers=n,o}(function(e){for(var r=[],t=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=r.find(t)))if(d(o.descriptor)||d(i.descriptor)){if(s(o)||s(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(s(o)){if(s(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}c=i,void 0!==(a=o).descriptor.get?c.descriptor.get=a.descriptor.get:c.descriptor.set=a.descriptor.set}else r.push(o)}var a,c;return r}(v.d.map(e)),t),u=v.F,l=w.elements,p=u.prototype,["method","field"].forEach(function(n){l.forEach(function(e){var r=e.placement;if(e.kind===n&&("static"===r||"prototype"===r)){var t="static"===r?u:p;o(t,e)}})}),function(e,r){for(var t=0;t<r.length;t++){var n=(0,r[t])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e}(v.F,w.finishers))});
