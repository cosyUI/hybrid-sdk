!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.wya=n()}(this,function(){"use strict";function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var e,f=function(e,n){var t;"function"==typeof document.CustomEvent?t=new document.CustomEvent(e,{bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(t=document.createEvent("Event")).initEvent(e,!0,!0),n&&t&&(t.data=n),t?window.dispatchEvent(t):console.error("Bridge Error: dispatchEvent")};return new(function(){for(var e=arguments,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=e[r];return function(e){Object.assign.apply(Object,[e.prototype].concat(t))}}(function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){var n,t,r;n=o,r=i[t=e],t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r})}return o}({},{}))(e=function(){function e(){var a=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="1.0.0",Object.defineProperty(this,"__readyArr__",{value:[],writable:!0}),this.isInit=!1,window.addEventListener("_ready_",function(e){var n=e.data||{},t=n.status,r=n.data,o=void 0===r?{}:r;if(1===t){for(var i in a.isInit=!0,o)a[i]||(a[i]=o[i]);a.__readyArr__.forEach(function(e){return e()}),a.__readyArr__=[]}})}var n,t,r;return n=e,(t=[{key:"ready",value:function(e){this.isInit?e&&e():this.__readyArr__.push(e)}},{key:"onError",value:function(n){window.addEventListener("_error_",function(e){n&&n(e.data)})}},{key:"useJSBridgeFn",value:function(e){var n,t,r=arguments,o=window.WYAJSBridge?window.WYAJSBridge[e]:void 0,i="WYAJSBridge API未注入";!o&&(f("_error_",n=i),t&&t({status:0,msg:n}));for(var a=arguments.length,u=new Array(1<a?a-1:0),c=1;c<a;c++)u[c-1]=r[c];return o?o.apply(WYAJSBridge,u):"invoke"===e?Promise.reject({msg:i}):void 0}},{key:"invoke",value:function(e,n){return this.useJSBridgeFn("invoke",e,n)}},{key:"on",value:function(){for(var e=arguments,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=e[r];return this.useJSBridgeFn.apply(this,["on"].concat(t))}},{key:"once",value:function(){for(var e=arguments,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=e[r];return this.useJSBridgeFn.apply(this,["once"].concat(t))}},{key:"first",value:function(){for(var e=arguments,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=e[r];return this.useJSBridgeFn.apply(this,["first"].concat(t))}},{key:"last",value:function(){for(var e=arguments,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=e[r];return this.useJSBridgeFn.apply(this,["last"].concat(t))}},{key:"off",value:function(e){return this.useJSBridgeFn("off",e)}}])&&o(n.prototype,t),r&&o(n,r),e}())||e)});
