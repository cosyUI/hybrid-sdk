!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.wya=t()}(this,function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(e,t){var n;"function"==typeof document.CustomEvent?n=new document.CustomEvent(e,{bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(n=document.createEvent("Event")).initEvent(e,!0,!0),t&&n&&(n.data=t),n?window.dispatchEvent(n):console.error("Bridge Error: dispatchEvent")},u=function(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=a[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},{navigator:["push","pop"],app:["install","uninstall","open","reboot","has"],clipboard:["get","set"],storage:["get","set","remove","clear","getAllKeys"],photo:["get","save"],notification:["add","remove"],floatBall:["show","hide"],system:["sms","mail","contacts","call","getBattery","getNetwork"],screen:["orientate","keepOn","toLauncher"],style:["setWin","setStatusBar","setBadge"],memory:["getCache","clearCache","getTotal","getFree"],record:["start","stop","pause","resume","restart"],audio:["start","stop","pause","resume","restart"],download:["start","cancel","pause","resume","restart"],upload:["start","cancel","pause","resume","restart"],location:["open","close","get"],sensor:["open","close"],video:["open"],wifi:[],bluetooth:[],nfc:[]});return new(function(){function e(){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="1.0.0",Object.defineProperty(this,"__readyArr__",{value:[],writable:!0}),Object.keys(u).forEach(function(e){return i.registerModule(e,u[e])}),this.isInit=!1,window.addEventListener("_ready_",function(e){var t=e.data||{},n=t.status,r=t.data,o=void 0===r?{}:r;if(1===n){for(var a in i.isInit=!0,o)i[a]||(i[a]=o[a]);i.__readyArr__.forEach(function(e){return e()}),i.__readyArr__=[]}})}var t,n,r;return t=e,(n=[{key:"ready",value:function(e){this.isInit?e&&e():this.__readyArr__.push(e)}},{key:"onError",value:function(t){window.addEventListener("_error_",function(e){t&&t(e.data)})}},{key:"onLog",value:function(t){window.addEventListener("_log_",function(e){t&&t(e.data)})}},{key:"useJSBridgeFn",value:function(e){var t,n,r=arguments,o=window.WYAJSBridge?window.WYAJSBridge[e]:void 0,a="WYAJSBridge API未注入";!o&&(c("_error_",t=a),n&&n({status:0,msg:t}));for(var i=arguments.length,u=new Array(1<i?i-1:0),s=1;s<i;s++)u[s-1]=r[s];return o?o.apply(WYAJSBridge,u):"invoke"===e?Promise.reject({msg:a}):void 0}},{key:"invoke",value:function(e,t){return this.useJSBridgeFn("invoke",e,t)}},{key:"on",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["on"].concat(n))}},{key:"once",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["once"].concat(n))}},{key:"first",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["first"].concat(n))}},{key:"last",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["last"].concat(n))}},{key:"off",value:function(e){return this.useJSBridgeFn("off",e)}},{key:"requireModule",value:function(e){return this[e]}},{key:"registerModule",value:function(n,e){var t,r=this;!this[n]&&e&&(e instanceof Array?t=e.reduce(function(e,t){return e[t]=r.invoke.bind(r,"".concat(n,"/").concat(t)),e},{}):"object"===o(e)&&(t=e),Object.defineProperty(this,n,{value:t,writable:!1}))}}])&&a(t.prototype,n),r&&a(t,r),e}())});
