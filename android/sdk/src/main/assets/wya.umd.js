!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.wya=t()}(this,function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(e,t){var n;"function"==typeof document.CustomEvent?n=new document.CustomEvent(e,{bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(n=document.createEvent("Event")).initEvent(e,!0,!0),t&&n&&(n.data=t),n?window.dispatchEvent(n):console.error("Bridge Error: dispatchEvent")},s=function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},{navigator:["push","pop"],app:["install","uninstall","open","reboot","has"],clipboard:["set","get"],storage:["set","get","remove","getAllKeys"],record:["start","stop"],audio:["start","stop"],video:["start","open"],box:["show","hide"],photo:["get","save"],notification:["set","cancel"],system:["sms","mail","contacts","call"],sensor:["start","stop"],download:["start","stop"],upload:["start","stop"],cache:["get","clear"],space:["total","free"],location:["start","stop","get"],screen:["orientate","keep","home"],style:["win","bar","badge"]});return new(function(){function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="1.0.0",Object.defineProperty(this,"__readyArr__",{value:[],writable:!0}),Object.keys(s).forEach(function(e){return a.registerModule(e,s[e])}),this.isInit=!1,window.addEventListener("_ready_",function(e){var t=e.data||{},n=t.status,r=t.data,o=void 0===r?{}:r;if(1===n){for(var i in a.isInit=!0,o)a[i]||(a[i]=o[i]);a.__readyArr__.forEach(function(e){return e()}),a.__readyArr__=[]}})}var t,n,r;return t=e,(n=[{key:"ready",value:function(e){this.isInit?e&&e():this.__readyArr__.push(e)}},{key:"onError",value:function(t){window.addEventListener("_error_",function(e){t&&t(e.data)})}},{key:"useJSBridgeFn",value:function(e){var t,n,r=arguments,o=window.WYAJSBridge?window.WYAJSBridge[e]:void 0,i="WYAJSBridge API未注入";!o&&(c("_error_",t=i),n&&n({status:0,msg:t}));for(var a=arguments.length,s=new Array(1<a?a-1:0),u=1;u<a;u++)s[u-1]=r[u];return o?o.apply(WYAJSBridge,s):"invoke"===e?Promise.reject({msg:i}):void 0}},{key:"invoke",value:function(e,t){return this.useJSBridgeFn("invoke",e,t)}},{key:"on",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["on"].concat(n))}},{key:"once",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["once"].concat(n))}},{key:"first",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["first"].concat(n))}},{key:"last",value:function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return this.useJSBridgeFn.apply(this,["last"].concat(n))}},{key:"off",value:function(e){return this.useJSBridgeFn("off",e)}},{key:"requireModule",value:function(e){return this[e]}},{key:"registerModule",value:function(n,e){var r=this;if(!this[n]&&e){if(e instanceof Array){var t=e.reduce(function(e,t){return e[t]=r.invoke.bind(r,"".concat(n,"/").concat(t)),e},{});return this[n]=t}return"object"===o(e)?(this[n]=methods,e):void 0}}}])&&i(t.prototype,n),r&&i(t,r),e}())});
